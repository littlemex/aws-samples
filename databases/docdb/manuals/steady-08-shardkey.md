# Amazon DocumentDB 定常的な負荷対策 - シャードキー設計問題ソリューション

## 8.1 シャードキー選択の最適化

より均一な分散を実現するシャードキーを選択します。データの分布特性とアクセスパターンを考慮し、効果的なシャードキーを設計することで、データとクエリの負荷を均等に分散させることができます。シャードキーの選択は、システム全体のパフォーマンスに大きな影響を与える重要な設計決定です。

## 8.2 複合シャードキーの検討

複数フィールドを組み合わせたシャードキーの使用を検討します。単一フィールドでは十分な分散が得られない場合、複数のフィールドを組み合わせることで、より細かい粒度でのデータ分散が可能になります。アプリケーションのクエリパターンに基づいて、適切なフィールドの組み合わせを選択することが重要です。

## 8.3 ハッシュベースシャードキーの検討

ハッシュベースのシャードキーによる均一分散を検討します。自然なキーでは均一な分散が難しい場合、ハッシュ関数を使用することで、より均一なデータ分布を実現できます。ただし、ハッシュベースのシャードキーを使用する場合は、範囲クエリのパフォーマンスへの影響を考慮する必要があります。
